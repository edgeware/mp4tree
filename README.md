# mp4tree
mp4tree is a simple tool that can be used to inspect mp4 files.

# Building
    $ make

# Usage
    Description:
     This program parses and prints the content of an mp4 file.
    Usage: mp4tree [OPTION]... [FILE]
      Available OPTIONs:
      -t, --truncate=N          Truncate boxes larger N bytes (default N=256)
      -s, --selftest            Run self test

# Example
    $ ./mp4tree ~/tmp/D5282976650044325.cmfv
    Reading file /home/erik/tmp/D5282976650044325.cmfv
    Read 1225371 bytes
    File Content:
    +--- Length: 3405 Type: moof
    |  +--- Length: 16 Type: mfhd
    |  |    0000    00 00 00 00 57 ea 6f 39
    |  +--- Length: 3381 Type: traf
    |  |  +--- Length: 16 Type: tfhd
    |  |  |    0000    00 02 00 00 00 00 00 01
    |  |  +--- Length: 1620 Type: trun
    |  |  |    Version:     0
    |  |  |    Flags:       0x000f01
    |  |  |    Samples:     100
    |  |  |    Data Offset: 3413
    |  |  |    Sample Table:
    |  |  |               Duration    Size    Flags    Composition-Time-Offset (CTS)
    |  |  |          1:   400004    77387   33554432   1200000
    |  |  |          2:   400004    30069   16842752   4000000
    |  |  |          3:   400005    14430   16842752   2000000
    |  |  |          4:   400004     9973   16842752   800000
    |  |  |          5:   400005     5505   16842752        0
    |  |  |          6:   400004     4617   16842752   400000
    |  |  |          7:   400005     9050   16842752   1200000
    |  |  |          8:   400004     4580   16842752   400000
    |  |  |          9:   400004     4344   16842752   800000
    |  |  |         10:   400005    29673   16842752   4000000
    |  |  |         11:   400004    12048   16842752   2000000
    |  |  |         12:   400005     6653   16842752   800000
    |  |  |         13:   400004     3558   16842752        0
    |  |  |         14:   400005     3916   16842752   400000
    |  |  |         15:   400004    10019   16842752   1200000
    |  |  |         16:   400005     3655   16842752   400000
    |  |  |         17:   400004     5748   16842752   800000
    |  |  |         18:   400004    76615   33554432   4000000
    |  |  |         19:   400005    14534   16842752   2000000
    |  |  |         20:   400004    11693   16842752   800000
    |  |  |         21:   400005     4794   16842752        0
    |  |  |         22:   400004     4598   16842752   400000
    |  |  |         23:   400005     6893   16842752   1200000
    |  |  |         24:   400004     4290   16842752   400000
    |  |  |         25:   400005     3885   16842752   800000
    |  |  |         26:   400004    37032   16842752   4000000
    |  |  |         27:   400004    14703   16842752   2000000
    |  |  |         28:   400005     9527   16842752   800000
    |  |  |         29:   400004     3928   16842752        0
    |  |  |         30:   400005     4469   16842752   400000
    |  |  |         31:   400004     9254   16842752   1200000
    |  |  |         32:   400005     3956   16842752   400000
    |  |  |         33:   400004     5187   16842752   800000
    |  |  |         34:   400004    29379   16842752   4000000
    |  |  |         35:   400005    13492   16842752   2000000
    |  |  |         36:   400004    10483   16842752   800000
    |  |  |         37:   400005     5773   16842752        0
    |  |  |         38:   400004     5628   16842752   400000
    |  |  |         39:   400005    10666   16842752   1200000
    |  |  |         40:   400004     4904   16842752   400000
    |  |  |         41:   400005     5701   16842752   800000
    |  |  |         42:   400004    25862   16842752   4000000
    |  |  |         43:   400004    14788   16842752   2000000
    |  |  |         44:   400005    11477   16842752   800000
    |  |  |         45:   400004     5639   16842752        0
    |  |  |         46:   400005     6520   16842752   400000
    |  |  |         47:   400004    11013   16842752   1200000
    |  |  |         48:   400005     6300   16842752   400000
    |  |  |         49:   400004     6482   16842752   800000
    |  |  |         50:   400005    20980   16842752   1200000
    |  |  |         51:   400004    73384   33554432   1200000
    |  |  |         52:   400004    27732   16842752   4000000
    |  |  |         53:   400005    11885   16842752   2000000
    |  |  |         54:   400004     8103   16842752   800000
    |  |  |         55:   400005     3739   16842752        0
    |  |  |         56:   400004     4625   16842752   400000
    |  |  |         57:   400005     9213   16842752   1200000
    |  |  |         58:   400004     4725   16842752   400000
    |  |  |         59:   400004     4214   16842752   800000
    |  |  |         60:   400005    28925   16842752   4000000
    |  |  |         61:   400004    12702   16842752   2000000
    |  |  |         62:   400005     8892   16842752   800000
    |  |  |         63:   400004     3785   16842752        0
    |  |  |         64:   400005     3746   16842752   400000
    |  |  |         65:   400004     7790   16842752   1200000
    |  |  |         66:   400005     4318   16842752   400000
    |  |  |         67:   400004     4267   16842752   800000
    |  |  |         68:   400004    73244   33554432   4000000
    |  |  |         69:   400005    13662   16842752   2000000
    |  |  |         70:   400004     8252   16842752   800000
    |  |  |         71:   400005     3632   16842752        0
    |  |  |         72:   400004     5137   16842752   400000
    |  |  |         73:   400005    10116   16842752   1200000
    |  |  |         74:   400004     4931   16842752   400000
    |  |  |         75:   400005     4976   16842752   800000
    |  |  |         76:   400004    31612   16842752   4000000
    |  |  |         77:   400004    13853   16842752   2000000
    |  |  |         78:   400005    10331   16842752   800000
    |  |  |         79:   400004     5108   16842752        0
    |  |  |         80:   400005     4900   16842752   400000
    |  |  |         81:   400004    10582   16842752   1200000
    |  |  |         82:   400005     5664   16842752   400000
    |  |  |         83:   400004     5006   16842752   800000
    |  |  |         84:   400004    29103   16842752   4000000
    |  |  |         85:   400005    11979   16842752   2000000
    |  |  |         86:   400004    10342   16842752   800000
    |  |  |         87:   400005     4997   16842752        0
    |  |  |         88:   400004     4205   16842752   400000
    |  |  |         89:   400005     8453   16842752   1200000
    |  |  |         90:   400004     4165   16842752   400000
    |  |  |         91:   400005     3604   16842752   800000
    |  |  |         92:   400004    28882   16842752   4000000
    |  |  |         93:   400004     9607   16842752   2000000
    |  |  |         94:   400005     6805   16842752   800000
    |  |  |         95:   400004     3413   16842752        0
    |  |  |         96:   400005     2220   16842752   400000
    |  |  |         97:   400004     6782   16842752   1200000
    |  |  |         98:   400005     3158   16842752   400000
    |  |  |         99:   400004     3764   16842752   800000
    |  |  |        100:   400005    17565   16842752   1200000
    |  |  +--- Length: 1632 Type: uuid
    |  |  |    Name:        Sample Encryption Box
    |  |  |    Version:     0
    |  |  |    Flags:       0x000002
    |  |  |    Num Entries: 100
    |  |  |    Entry           IV             Entries  Clear  Encrypted
    |  |  |      0   ab cd 12 34 00 00 00 00      1     500     76887
    |  |  |      1   ab cd 12 34 00 00 00 01      1     500     29569
    |  |  |      2   ab cd 12 34 00 00 00 02      1     500     13930
    |  |  |      3   ab cd 12 34 00 00 00 03      1     500      9473
    |  |  |      4   ab cd 12 34 00 00 00 04      1     500      5005
    |  |  |      5   ab cd 12 34 00 00 00 05      1     500      4117
    |  |  |      6   ab cd 12 34 00 00 00 06      1     500      8550
    |  |  |      7   ab cd 12 34 00 00 00 07      1     500      4080
    |  |  |      8   ab cd 12 34 00 00 00 08      1     500      3844
    |  |  |      9   ab cd 12 34 00 00 00 09      1     500     29173
    |  |  |     10   ab cd 12 34 00 00 00 0a      1     500     11548
    |  |  |     11   ab cd 12 34 00 00 00 0b      1     500      6153
    |  |  |     12   ab cd 12 34 00 00 00 0c      1     500      3058
    |  |  |     13   ab cd 12 34 00 00 00 0d      1     500      3416
    |  |  |     14   ab cd 12 34 00 00 00 0e      1     500      9519
    |  |  |     15   ab cd 12 34 00 00 00 0f      1     500      3155
    |  |  |     16   ab cd 12 34 00 00 00 10      1     500      5248
    |  |  |     17   ab cd 12 34 00 00 00 11      1     500     76115
    |  |  |     18   ab cd 12 34 00 00 00 12      1     500     14034
    |  |  |     19   ab cd 12 34 00 00 00 13      1     500     11193
    |  |  |     20   ab cd 12 34 00 00 00 14      1     500      4294
    |  |  |     21   ab cd 12 34 00 00 00 15      1     500      4098
    |  |  |     22   ab cd 12 34 00 00 00 16      1     500      6393
    |  |  |     23   ab cd 12 34 00 00 00 17      1     500      3790
    |  |  |     24   ab cd 12 34 00 00 00 18      1     500      3385
    |  |  |     25   ab cd 12 34 00 00 00 19      1     500     36532
    |  |  |     26   ab cd 12 34 00 00 00 1a      1     500     14203
    |  |  |     27   ab cd 12 34 00 00 00 1b      1     500      9027
    |  |  |     28   ab cd 12 34 00 00 00 1c      1     500      3428
    |  |  |     29   ab cd 12 34 00 00 00 1d      1     500      3969
    |  |  |     30   ab cd 12 34 00 00 00 1e      1     500      8754
    |  |  |     31   ab cd 12 34 00 00 00 1f      1     500      3456
    |  |  |     32   ab cd 12 34 00 00 00 20      1     500      4687
    |  |  |     33   ab cd 12 34 00 00 00 21      1     500     28879
    |  |  |     34   ab cd 12 34 00 00 00 22      1     500     12992
    |  |  |     35   ab cd 12 34 00 00 00 23      1     500      9983
    |  |  |     36   ab cd 12 34 00 00 00 24      1     500      5273
    |  |  |     37   ab cd 12 34 00 00 00 25      1     500      5128
    |  |  |     38   ab cd 12 34 00 00 00 26      1     500     10166
    |  |  |     39   ab cd 12 34 00 00 00 27      1     500      4404
    |  |  |     40   ab cd 12 34 00 00 00 28      1     500      5201
    |  |  |     41   ab cd 12 34 00 00 00 29      1     500     25362
    |  |  |     42   ab cd 12 34 00 00 00 2a      1     500     14288
    |  |  |     43   ab cd 12 34 00 00 00 2b      1     500     10977
    |  |  |     44   ab cd 12 34 00 00 00 2c      1     500      5139
    |  |  |     45   ab cd 12 34 00 00 00 2d      1     500      6020
    |  |  |     46   ab cd 12 34 00 00 00 2e      1     500     10513
    |  |  |     47   ab cd 12 34 00 00 00 2f      1     500      5800
    |  |  |     48   ab cd 12 34 00 00 00 30      1     500      5982
    |  |  |     49   ab cd 12 34 00 00 00 31      1     500     20480
    |  |  |     50   ab cd 12 34 00 00 00 32      1     500     72884
    |  |  |     51   ab cd 12 34 00 00 00 33      1     500     27232
    |  |  |     52   ab cd 12 34 00 00 00 34      1     500     11385
    |  |  |     53   ab cd 12 34 00 00 00 35      1     500      7603
    |  |  |     54   ab cd 12 34 00 00 00 36      1     500      3239
    |  |  |     55   ab cd 12 34 00 00 00 37      1     500      4125
    |  |  |     56   ab cd 12 34 00 00 00 38      1     500      8713
    |  |  |     57   ab cd 12 34 00 00 00 39      1     500      4225
    |  |  |     58   ab cd 12 34 00 00 00 3a      1     500      3714
    |  |  |     59   ab cd 12 34 00 00 00 3b      1     500     28425
    |  |  |     60   ab cd 12 34 00 00 00 3c      1     500     12202
    |  |  |     61   ab cd 12 34 00 00 00 3d      1     500      8392
    |  |  |     62   ab cd 12 34 00 00 00 3e      1     500      3285
    |  |  |     63   ab cd 12 34 00 00 00 3f      1     500      3246
    |  |  |     64   ab cd 12 34 00 00 00 40      1     500      7290
    |  |  |     65   ab cd 12 34 00 00 00 41      1     500      3818
    |  |  |     66   ab cd 12 34 00 00 00 42      1     500      3767
    |  |  |     67   ab cd 12 34 00 00 00 43      1     500     72744
    |  |  |     68   ab cd 12 34 00 00 00 44      1     500     13162
    |  |  |     69   ab cd 12 34 00 00 00 45      1     500      7752
    |  |  |     70   ab cd 12 34 00 00 00 46      1     500      3132
    |  |  |     71   ab cd 12 34 00 00 00 47      1     500      4637
    |  |  |     72   ab cd 12 34 00 00 00 48      1     500      9616
    |  |  |     73   ab cd 12 34 00 00 00 49      1     500      4431
    |  |  |     74   ab cd 12 34 00 00 00 4a      1     500      4476
    |  |  |     75   ab cd 12 34 00 00 00 4b      1     500     31112
    |  |  |     76   ab cd 12 34 00 00 00 4c      1     500     13353
    |  |  |     77   ab cd 12 34 00 00 00 4d      1     500      9831
    |  |  |     78   ab cd 12 34 00 00 00 4e      1     500      4608
    |  |  |     79   ab cd 12 34 00 00 00 4f      1     500      4400
    |  |  |     80   ab cd 12 34 00 00 00 50      1     500     10082
    |  |  |     81   ab cd 12 34 00 00 00 51      1     500      5164
    |  |  |     82   ab cd 12 34 00 00 00 52      1     500      4506
    |  |  |     83   ab cd 12 34 00 00 00 53      1     500     28603
    |  |  |     84   ab cd 12 34 00 00 00 54      1     500     11479
    |  |  |     85   ab cd 12 34 00 00 00 55      1     500      9842
    |  |  |     86   ab cd 12 34 00 00 00 56      1     500      4497
    |  |  |     87   ab cd 12 34 00 00 00 57      1     500      3705
    |  |  |     88   ab cd 12 34 00 00 00 58      1     500      7953
    |  |  |     89   ab cd 12 34 00 00 00 59      1     500      3665
    |  |  |     90   ab cd 12 34 00 00 00 5a      1     500      3104
    |  |  |     91   ab cd 12 34 00 00 00 5b      1     500     28382
    |  |  |     92   ab cd 12 34 00 00 00 5c      1     500      9107
    |  |  |     93   ab cd 12 34 00 00 00 5d      1     500      6305
    |  |  |     94   ab cd 12 34 00 00 00 5e      1     500      2913
    |  |  |     95   ab cd 12 34 00 00 00 5f      1     500      1720
    |  |  |     96   ab cd 12 34 00 00 00 60      1     500      6282
    |  |  |     97   ab cd 12 34 00 00 00 61      1     500      2658
    |  |  |     98   ab cd 12 34 00 00 00 62      1     500      3264
    |  |  |     99   ab cd 12 34 00 00 00 63      1     500     17065
    |  |  +--- Length: 44 Type: uuid
    |  |  |    0000    6d 1d 9b 05 42 d5 44 e6 80 e2 14 1d af f7 57 b2 |m...B.D.......W.|
    |  |  |    0010    01 00 00 00 00 12 c4 d6 d5 d0 6c 2d 00 00 00 00 |..........l-....|
    |  |  |    0020    02 62 5b bc
    |  |  +--- Length: 61 Type: uuid
    |  |  |    0000    d4 80 7e f2 ca 39 46 95 8e 54 26 cb 9e 46 a7 9f |..~..9F..T&..F..|
    |  |  |    0010    01 00 00 00 02 00 12 c4 d6 d8 32 c7 e9 00 00 00 |..........2.....|
    |  |  |    0020    00 02 62 5b bc 00 00 00 00 00 00 00 00 00 00 00 |..b[............|
    |  |  |    0030    00 00 00 00 00
    +--- Length: 1237773 Type: mdat
    |  +--- Length 2 Type: H264 NAL
    |  |    nal_ref_idc:    0
    |  |    nal_unit_type:  9 (AUD)
    |  +--- Length 29 Type: H264 NAL
    |  |    nal_ref_idc:    3
    |  |    nal_unit_type:  7 (SPS)
    |  |    0000    67 4d 40 1e 96 52 81 68 24 df f8 02 00 01 6f a8 |gM@..R.h$.....o.|
    |  |    0010    28 28 2f 80 00 00 03 00 80 00 00 19 4a
    |  +--- Length 4 Type: H264 NAL
    |  |    nal_ref_idc:    3
    |  |    nal_unit_type:  8 (PPS)
    |  |    0000    68 ff 3c 80
    |  +--- Length 23 Type: H264 NAL
    |  |    nal_ref_idc:    0
    |  |    nal_unit_type:  6 (SEI)
    |  +--- Length 72648 Type: H264 NAL


